# walkie_talkie_on_PC

## 動作環境
LinuxとかMacで動くと思います。
WSLではうまく動かなかった。

### 依存ライブラリ

以下のライブラリが必要です。
pipなどでインストールできます。

- NumPy
- Pygame
- python-sounddevice

コマンド例:
```bash
pip3 install numpy pygame sounddevice
```

## 実行方法

サーバ側
```bash
python3 main.py (Port)
```
クライアント側
```bash
python3 main.py (Port) (IP address)
```
終了はEscキー

## 操作方法

### 電話機能

キーボードのTがPTTボタンとなっており、このボタンを押している間のみ音声を相手に伝える。送信中は GUI ウィンドウに「TALKING」と表示される。交互通話のため、相手が話している時に送信することはできない。その際には、「TALKING」も表示されない。

### 電信機能

- 正弦波の周波数を左右矢印キーによって変更が可能。周波数は常時ウィンドウに表示される。
- 符号送信時、送信先だけでなく自分のスピーカーからも音が再生（これを「モニタ」と呼ぶ）されるため、送信した符号の確認が可能。
- 交互通信であるため、相手の送信中は自分は送信することができない。その際は、モニタの再生も行われない。
- スペースキーはストレートキーモード。押している間符号を送信する。
- Vキー、Bキーはパドルモード。Vキーが短音、Bキーが長音。スクイズ機能もあり。
- 上下矢印キーにより、パドルモードにおけるWPMを変更可能。

### キー操作一覧

| キー操作 | 機能 |
| --- | ---|
| `T` | 押している間、マイク入力を送信する（プッシュ・トゥ・トーク） |
| `Space` | 押している間だけ符号を連続的に送信する |
| `V` | 押している間、短音の符号を送信する |
| `B` | 押している間、長音の符号を送信する |
| `V` `B` | 同時に押している間、長音と短音を交互に送信する（スクイズ） |
| `↑`/`↓` | モールス符号の速度を変更する |
| `←`/`→` | モールス符号の音の周波数を変更する |
| `Esc` | 通信を終了する |

## Contributors

- [ncrpy](https://twitter.com/ncrpy) - コードを書きました。
